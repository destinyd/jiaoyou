  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (31.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (94.0ms)[0m   [0mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `schema_migrations`[0m
  [4;35;1mSQL (31.0ms)[0m   [0mCREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20100720125948)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mCREATE TABLE `users` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `login` varchar(40), `name` varchar(100) DEFAULT '', `email` varchar(100), `crypted_password` varchar(40), `salt` varchar(40), `created_at` datetime, `updated_at` datetime, `remember_token` varchar(40), `remember_token_expires_at` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
  [4;35;1mSQL (16.0ms)[0m   [0mCREATE UNIQUE INDEX `index_users_on_login` ON `users` (`login`)[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100720125948')[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (16.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mdescribe `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 22:25:50) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `state_and_city_select' for #<ActionView::Base:0x3b5caf4>) on line #18 of app/views/users/new.html.erb:
15: <p><%= label_tag 'password_confirmation', 'Confirm Password' %><br/>
16: <%= f.password_field :password_confirmation %></p>
17: 
18: <%= state_and_city_select :user, :state, :city %>
19: 
20: <p><%= submit_tag 'Sign up' %></p>
21: <% end -%>

    app/views/users/new.html.erb:18
    app/views/users/new.html.erb:5

Rendered rescues/_trace (109.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 22:35:18) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `state_and_city_select' for #<ActionView::Base:0x3ae8e74>) on line #18 of app/views/users/new.html.erb:
15: <p><%= label_tag 'password_confirmation', 'Confirm Password' %><br/>
16: <%= f.password_field :password_confirmation %></p>
17: 
18: <%= state_and_city_select :user, :state, :city %>
19: 
20: <p><%= submit_tag 'Sign up' %></p>
21: <% end -%>

    app/views/users/new.html.erb:18
    app/views/users/new.html.erb:5

Rendered rescues/_trace (109.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 22:41:16) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 219ms (View: 172, DB: 0) | 200 OK [http://127.0.0.1/signup]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 22:43:34) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 266ms (View: 188, DB: 0) | 200 OK [http://127.0.0.1/signup]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 22:58:56) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new
ERROR: compiling _run_erb_app47views47users47new46html46erb RAISED compile error
D:/ror2010/jiaoyou/app/views/users/new.html.erb:21: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:22: syntax error, unexpected ')', expecting kEND
...      }, html_options) ).to_s); @output_buffer.concat "\n   ...
                              ^
D:/ror2010/jiaoyou/app/views/users/new.html.erb:29: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:30: syntax error, unexpected ')', expecting kEND
...      }, html_options) ).to_s); @output_buffer.concat "\n   ...
                              ^
Function body:           def _run_erb_app47views47users47new46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>Sign up as a new user</h1>\n"
;  @user.password = @user.password_confirmation = nil ; @output_buffer.concat "\n\n"

; @output_buffer.concat(( error_messages_for :user ).to_s); @output_buffer.concat "\n"
;  form_for :user, :url => users_path do |f| 
@output_buffer.concat "<p>"; @output_buffer.concat(( label_tag 'login' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.text_field :login ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'email' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.text_field :email ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'password' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.password_field :password ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'password_confirmation', 'Confirm Password' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.password_field :password_confirmation ).to_s); @output_buffer.concat "</p>\n\n"

; @output_buffer.concat(( country_select(:user, :country, {
                :only => [:china],            # Specify the countries you like to displayed in select.
                :update => 'state_select_id', # Specify id of state select which you like to be updated when country 
                changed
              }, html_options) ).to_s); @output_buffer.concat "\n              "
; @output_buffer.concat((
state_select(:user, :state, {
                :country => :china,           # Specify the default states options.
                :countries => [:china],       # set this only when you set :update option in country select,
                                              # and this should keep save with the :only options in country select.
                :update => 'city_select_id',  # Specify id of city select which you like to be updated when state 
                changed
              }, html_options) ).to_s); @output_buffer.concat "\n              "
; @output_buffer.concat((
city_select(:user, :city, {
                :country => :china,           # This is used to set the default city options.
                :state   => :beijing,         # This is used to set the default city options.
              }, html_options)
 ).to_s); @output_buffer.concat "\n\n<p>"

; @output_buffer.concat(( submit_tag 'Sign up' ).to_s); @output_buffer.concat "</p>\n"
;  end 
@output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: D:/ror2010/jiaoyou/app/views/users/new.html.erb:43:in `compile!'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:61:in `compile'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:28:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/template.rb:205:in `render_template'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/base.rb:265:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1250:in `render_for_file'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:936:in `render_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1326:in `default_render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:617:in `call_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/flash.rb:151:in `perform_action'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `send'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `process_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:606:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:391:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:386:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/routing/route_set.rb:438:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:87:in `dispatch'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:121:in `_call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:9:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:28:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/string_coercion.rb:25:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/head.rb:9:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/methodoverride.rb:24:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/params_parser.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/session/cookie_store.rb:99:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/failsafe.rb:26:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `synchronize'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:114:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/reloader.rb:34:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:108:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/static.rb:31:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:47:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/log_tailer.rb:17:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/chunked.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:67:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:159:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:38:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:111
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
D:/ror2010/jiaoyou/app/views/users/new.html.erb:21: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:22: syntax error, unexpected ')', expecting kEND
...      }, html_options) ).to_s); @output_buffer.concat "\n   ...
                              ^
D:/ror2010/jiaoyou/app/views/users/new.html.erb:29: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:30: syntax error, unexpected ')', expecting kEND
...      }, html_options) ).to_s); @output_buffer.concat "\n   ...
                              ^) on line #21 of app/views/users/new.html.erb:
18: <%= country_select(:user, :country, {
19:                 :only => [:china],            # Specify the countries you like to displayed in select.
20:                 :update => 'state_select_id', # Specify id of state select which you like to be updated when country 
21:                 changed
22:               }, html_options) %>
23:               <%=
24: state_select(:user, :state, {

    app/views/users/new.html.erb:43:in `compile!'

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 22:59:22) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new
ERROR: compiling _run_erb_app47views47users47new46html46erb RAISED compile error
D:/ror2010/jiaoyou/app/views/users/new.html.erb:21: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:29: syntax error, unexpected '\n', expecting tASSOC
Function body:           def _run_erb_app47views47users47new46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>Sign up as a new user</h1>\n"
;  @user.password = @user.password_confirmation = nil ; @output_buffer.concat "\n\n"

; @output_buffer.concat(( error_messages_for :user ).to_s); @output_buffer.concat "\n"
;  form_for :user, :url => users_path do |f| 
@output_buffer.concat "<p>"; @output_buffer.concat(( label_tag 'login' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.text_field :login ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'email' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.text_field :email ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'password' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.password_field :password ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'password_confirmation', 'Confirm Password' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.password_field :password_confirmation ).to_s); @output_buffer.concat "</p>\n\n"

;  country_select(:user, :country, {
                :only => [:china],            # Specify the countries you like to displayed in select.
                :update => 'state_select_id', # Specify id of state select which you like to be updated when country 
                changed
              }, html_options) ; @output_buffer.concat "\n              "
; 
state_select(:user, :state, {
                :country => :china,           # Specify the default states options.
                :countries => [:china],       # set this only when you set :update option in country select,
                                              # and this should keep save with the :only options in country select.
                :update => 'city_select_id',  # Specify id of city select which you like to be updated when state 
                changed
              }, html_options) ; @output_buffer.concat "\n              "
; 
city_select(:user, :city, {
                :country => :china,           # This is used to set the default city options.
                :state   => :beijing,         # This is used to set the default city options.
              }, html_options)
 ; @output_buffer.concat "\n\n<p>"

; @output_buffer.concat(( submit_tag 'Sign up' ).to_s); @output_buffer.concat "</p>\n"
;  end 
@output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: D:/ror2010/jiaoyou/app/views/users/new.html.erb:43:in `compile!'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:61:in `compile'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:28:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/template.rb:205:in `render_template'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/base.rb:265:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1250:in `render_for_file'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:936:in `render_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1326:in `default_render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:617:in `call_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/flash.rb:151:in `perform_action'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `send'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `process_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:606:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:391:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:386:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/routing/route_set.rb:438:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:87:in `dispatch'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:121:in `_call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:9:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:28:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/string_coercion.rb:25:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/head.rb:9:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/methodoverride.rb:24:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/params_parser.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/session/cookie_store.rb:99:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/failsafe.rb:26:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `synchronize'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:114:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/reloader.rb:34:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:108:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/static.rb:31:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:47:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/log_tailer.rb:17:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/chunked.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:67:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:159:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:38:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:111
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
D:/ror2010/jiaoyou/app/views/users/new.html.erb:21: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:29: syntax error, unexpected '\n', expecting tASSOC) on line #21 of app/views/users/new.html.erb:
18: <% country_select(:user, :country, {
19:                 :only => [:china],            # Specify the countries you like to displayed in select.
20:                 :update => 'state_select_id', # Specify id of state select which you like to be updated when country 
21:                 changed
22:               }, html_options) %>
23:               <%
24: state_select(:user, :state, {

    app/views/users/new.html.erb:43:in `compile!'

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:00:51) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (wrong number of arguments (3 for 2)) on line #26 of app/views/users/new.html.erb:
23:                 :country => :china,
24:                 :countries => [:china],
25:                 :update => 'city')
26: city_select_tag(:user, :city, :country => :china, :state => :beijing)
27: 
28:  %>
29: 

    app/views/users/new.html.erb:26:in `city_select_tag'
    app/views/users/new.html.erb:26
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:02:05) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (wrong number of arguments (3 for 2)) on line #26 of app/views/users/new.html.erb:
23:                 :country => :china,
24:                 :countries => [:china],
25:                 :update => 'city')
26: city_select_tag(:user, :city, {:country => :china, :state => :beijing})
27: 
28:  %>
29: 

    app/views/users/new.html.erb:26:in `city_select_tag'
    app/views/users/new.html.erb:26
    app/views/users/new.html.erb:5

Rendered rescues/_trace (109.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:02:12) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 156ms (View: 109, DB: 0) | 200 OK [http://127.0.0.1/signup]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:02:33) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (wrong number of arguments (3 for 2)) on line #26 of app/views/users/new.html.erb:
23:                 :country => :china,
24:                 :countries => [:china],
25:                 :update => 'city')
26: city_select_tag(:user, :city, :country => :china, :state => :beijing)
27: 
28:  %>
29: 

    app/views/users/new.html.erb:26:in `city_select_tag'
    app/views/users/new.html.erb:26
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:02:44) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `delete' for :city:Symbol) on line #26 of app/views/users/new.html.erb:
23:                 :country => :china,
24:                 :countries => [:china],
25:                 :update => 'city')
26: city_select_tag(:user, :city)
27: 
28:  %>
29: 

    app/views/users/new.html.erb:26
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:03:02) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (wrong number of arguments (3 for 2)) on line #26 of app/views/users/new.html.erb:
23:                 :country => :china,
24:                 :countries => [:china],
25:                 :update => 'city')
26: city_select_tag(:user, :city, :country => :china)
27: 
28:  %>
29: 

    app/views/users/new.html.erb:26:in `city_select_tag'
    app/views/users/new.html.erb:26
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:04:08) [GET]
  [4;36;1mUser Columns (15.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (wrong number of arguments (1 for 2)) on line #19 of app/views/users/new.html.erb:
16: <%= f.password_field :password_confirmation %></p>
17: 
18: <%= 
19: country_select :country
20: state_select_tag :state
21:   city_select_tag :city
22: 

    app/views/users/new.html.erb:19:in `country_select'
    app/views/users/new.html.erb:19
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:04:37) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `delete' for :state:Symbol) on line #20 of app/views/users/new.html.erb:
17: 
18: <%= 
19: country_select :user,:country
20: state_select_tag :user,:state
21:   city_select_tag :user,:city
22: 
23: 

    app/views/users/new.html.erb:20
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:04:47) [GET]
  [4;36;1mUser Columns (15.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `delete' for :city:Symbol) on line #21 of app/views/users/new.html.erb:
18: <%= 
19: country_select :user,:country
20: #state_select_tag :user,:state
21:   city_select_tag :user,:city
22: 
23: 
24:  %>

    app/views/users/new.html.erb:21
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:04:52) [GET]
  [4;35;1mUser Columns (15.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 204ms (View: 157, DB: 15) | 200 OK [http://127.0.0.1/signup]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:05:57) [GET]
  [4;36;1mUser Columns (15.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x47ef974>) on line #20 of app/views/users/new.html.erb:
17: 
18: <%= 
19: state_select :user, :state                       
20: city_select :user, :city 
21: 
22: 
23:  %>

    app/views/users/new.html.erb:20
    app/views/users/new.html.erb:5

Rendered rescues/_trace (218.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UserDetailsController#index (for 127.0.0.1 at 2010-07-20 23:06:42) [GET]
  [4;35;1mUserDetail Load (0.0ms)[0m   [0mMysql::Error: Table 'jiaoyou_development.user_details' doesn't exist: SELECT * FROM `user_details` [0m

ActiveRecord::StatementInvalid (Mysql::Error: Table 'jiaoyou_development.user_details' doesn't exist: SELECT * FROM `user_details` ):
  app/controllers/user_details_controller.rb:5:in `index'

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UserDetailsController#new (for 127.0.0.1 at 2010-07-20 23:06:54) [GET]
  [4;36;1mUserDetail Columns (0.0ms)[0m   [0;1mMysql::Error: Table 'jiaoyou_development.user_details' doesn't exist: SHOW FIELDS FROM `user_details`[0m

ActiveRecord::StatementInvalid (Mysql::Error: Table 'jiaoyou_development.user_details' doesn't exist: SHOW FIELDS FROM `user_details`):
  app/controllers/user_details_controller.rb:27:in `new'
  app/controllers/user_details_controller.rb:27:in `new'

Rendered rescues/_trace (203.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (16.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20100720125948)
Migrating to CreateUserDetails (20100720132213)
  [4;36;1mSQL (0.0ms)[0m   [0;1mCREATE TABLE `user_details` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `nickname` varchar(255), `sex` varchar(255), `height` int(11), `birthday` datetime, `married` tinyint(1), `education` varchar(255), `monthly` varchar(255), `job` varchar(255), `notes` text, `user_id` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.0ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100720132213')[0m
Migrating to CreateUserContacts (20100720133010)
  [4;36;1mSQL (0.0ms)[0m   [0;1mCREATE TABLE `user_contacts` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `realname` varchar(255), `telephone` varchar(255), `qq` int(11), `MSN` varchar(255), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.0ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100720133010')[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `user_contacts`[0m
  [4;36;1mSQL (15.0ms)[0m   [0;1mdescribe `user_contacts`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `user_contacts`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW FIELDS FROM `user_details`[0m
  [4;35;1mSQL (16.0ms)[0m   [0mdescribe `user_details`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `user_details`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mdescribe `users`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:08:53) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `state_and_city_select' for #<ActionView::Base:0x3ae8c94>) on line #21 of app/views/users/new.html.erb:
18: <%= 
19: #state_select :user, :state                       
20: #city_select :user, :city 
21: state_and_city_select :user, :state, :city # Ê¡ÊÐ¶þ¼¶Áª¶¯select
22:  %>
23: 
24: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:21
    app/views/users/new.html.erb:5

Rendered rescues/_trace (93.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:09:19) [GET]
  [4;35;1mUser Columns (16.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x454a28c>) on line #24 of app/views/users/new.html.erb:
21: #state_and_city_select :user, :state, :city # Ê¡ÊÐ¶þ¼¶Áª¶¯select
22:  %>
23:  <%= 
24:  city_select :user, :city 
25:  %>
26: 
27: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:24
    app/views/users/new.html.erb:5

Rendered rescues/_trace (109.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:09:32) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x4a41cb8>) on line #24 of app/views/users/new.html.erb:
21: #state_and_city_select :user, :state, :city
22:  %>
23:  <%= 
24:  city_select :user, :city 
25:  %>
26: 
27: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:24
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20100720125948)
Migrating to CreateUserDetails (20100720132213)
Migrating to CreateUserContacts (20100720133010)
Migrating to AddCityToUserDetail (20100720151050)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20100720125948)
Migrating to CreateUserDetails (20100720132213)
Migrating to CreateUserContacts (20100720133010)
Migrating to AddCityToUserDetail (20100720151050)
  [4;36;1mSQL (0.0ms)[0m   [0;1mALTER TABLE `user_details` ADD `city` varchar(255)[0m
  [4;35;1mSQL (0.0ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100720151050')[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `user_contacts`[0m
  [4;36;1mSQL (16.0ms)[0m   [0;1mdescribe `user_contacts`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `user_contacts`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW FIELDS FROM `user_details`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mdescribe `user_details`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `user_details`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mdescribe `users`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `users`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:14:26) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x49956d4>) on line #20 of app/views/users/new.html.erb:
17: 
18: <%= 
19: state_select :user, :state                       
20:  city_select :user, :city 
21:  %>
22: 
23: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:20
    app/views/users/new.html.erb:5

Rendered rescues/_trace (219.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:14:29) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x484e9d8>) on line #20 of app/views/users/new.html.erb:
17: 
18: <%= 
19: state_select :user, :state                       
20:  city_select :user, :city 
21:  %>
22: 
23: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:20
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:16:06) [GET]
  [4;35;1mUser Columns (16.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 172ms (View: 125, DB: 16) | 200 OK [http://127.0.0.1/signup]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:16:17) [GET]
  [4;36;1mUser Columns (16.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 156ms (View: 109, DB: 16) | 200 OK [http://127.0.0.1/signup]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:16:55) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 313ms (View: 266, DB: 0) | 200 OK [http://127.0.0.1/signup]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:17:07) [GET]
  [4;36;1mUser Columns (15.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `state_select_tag' for #<ActionView::Helpers::FormBuilder:0x45dc8a8>) on line #19 of app/views/users/new.html.erb:
16: <%= f.password_field :password_confirmation %></p>
17: 
18: <%= 
19: f.state_select_tag :state
20:  %>
21:  <%=
22:   f.city_select_tag :city

    app/views/users/new.html.erb:19
    app/views/users/new.html.erb:5

Rendered rescues/_trace (203.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:17:16) [GET]
  [4;35;1mUser Columns (16.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x4801b10>) on line #22 of app/views/users/new.html.erb:
19: f.state_select :state
20:  %>
21:  <%=
22:   f.city_select :city
23:   %>
24: 
25: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:22
    app/views/users/new.html.erb:5

Rendered rescues/_trace (219.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:17:36) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new
Completed in 110ms (View: 63, DB: 0) | 200 OK [http://127.0.0.1/signup]
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:18:24) [GET]
  [4;35;1mUser Columns (16.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new
ERROR: compiling _run_erb_app47views47users47new46html46erb RAISED compile error
D:/ror2010/jiaoyou/app/views/users/new.html.erb:22: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:26: syntax error, unexpected ')', expecting kEND
).to_s); @output_buffer.concat "\n"
       ^
D:/ror2010/jiaoyou/app/views/users/new.html.erb:33: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:36: syntax error, unexpected ')', expecting kEND
 ).to_s); @output_buffer.concat "\n "
        ^
Function body:           def _run_erb_app47views47users47new46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>Sign up as a new user</h1>\n"
;  @user.password = @user.password_confirmation = nil ; @output_buffer.concat "\n\n"

; @output_buffer.concat(( error_messages_for :user ).to_s); @output_buffer.concat "\n"
;  form_for :user, :url => users_path do |f| 
@output_buffer.concat "<p>"; @output_buffer.concat(( label_tag 'login' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.text_field :login ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'email' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.text_field :email ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'password' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.password_field :password ).to_s); @output_buffer.concat "</p>\n\n<p>"

; @output_buffer.concat(( label_tag 'password_confirmation', 'Confirm Password' ).to_s); @output_buffer.concat "<br/>\n"
; @output_buffer.concat(( f.password_field :password_confirmation ).to_s); @output_buffer.concat "</p>\n\n"

; @output_buffer.concat((
country_select(:user, :country, {
                :only => [:china],            # Specify the countries you like to displayed in select.
                :update => 'state_select_id', # Specify id of state select which you like to be updated when country 
                changed
              }, html_options)


).to_s); @output_buffer.concat "\n"
; @output_buffer.concat(( 
state_select(:user, :state, {
                :country => :china,           # Specify the default states options.
                :countries => [:china],       # set this only when you set :update option in country select,
                                              # and this should keep save with the :only options in country select.
                :update => 'city_select_id',  # Specify id of city select which you like to be updated when state 
                changed
              }, html_options)

 ).to_s); @output_buffer.concat "\n "
; @output_buffer.concat((
city_select(:user, :city, {
                :country => :china,           # This is used to set the default city options.
                :state   => :beijing,         # This is used to set the default city options.
              }, html_options)
  ).to_s); @output_buffer.concat "\n\n<p>"

; @output_buffer.concat(( submit_tag 'Sign up' ).to_s); @output_buffer.concat "</p>\n"
;  end 
@output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: D:/ror2010/jiaoyou/app/views/users/new.html.erb:49:in `compile!'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:61:in `compile'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:28:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/template.rb:205:in `render_template'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/base.rb:265:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1250:in `render_for_file'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:936:in `render_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1326:in `default_render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1332:in `perform_action_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:617:in `call_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/flash.rb:151:in `perform_action'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `send'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `process_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:606:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:391:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:386:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/routing/route_set.rb:438:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:87:in `dispatch'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:121:in `_call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:9:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:28:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/string_coercion.rb:25:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/head.rb:9:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/methodoverride.rb:24:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/params_parser.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/session/cookie_store.rb:99:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/failsafe.rb:26:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `synchronize'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:114:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/reloader.rb:34:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:108:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/static.rb:31:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:47:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/log_tailer.rb:17:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/chunked.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:67:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:159:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:38:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:111
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
D:/ror2010/jiaoyou/app/views/users/new.html.erb:22: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:26: syntax error, unexpected ')', expecting kEND
).to_s); @output_buffer.concat "\n"
       ^
D:/ror2010/jiaoyou/app/views/users/new.html.erb:33: syntax error, unexpected '\n', expecting tASSOC
D:/ror2010/jiaoyou/app/views/users/new.html.erb:36: syntax error, unexpected ')', expecting kEND
 ).to_s); @output_buffer.concat "\n "
        ^) on line #22 of app/views/users/new.html.erb:
19: country_select(:user, :country, {
20:                 :only => [:china],            # Specify the countries you like to displayed in select.
21:                 :update => 'state_select_id', # Specify id of state select which you like to be updated when country 
22:                 changed
23:               }, html_options)
24: 
25: 

    app/views/users/new.html.erb:49:in `compile!'

Rendered rescues/_trace (187.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:18:53) [GET]
  [4;36;1mUser Columns (15.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined local variable or method `html_options' for #<ActionView::Base:0x4760b34>) on line #22 of app/views/users/new.html.erb:
19: country_select(:user, :country, {
20:                 :only => [:china],            # Specify the countries you like to displayed in select.
21:                 :update => 'state_select_id'
22:               }, html_options)
23: 
24: 
25: %>

    app/views/users/new.html.erb:22
    app/views/users/new.html.erb:5

Rendered rescues/_trace (203.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:19:00) [GET]
  [4;35;1mUser Columns (15.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined local variable or method `html_options' for #<ActionView::Base:0x47df09c>) on line #32 of app/views/users/new.html.erb:
29:                 :countries => [:china],       # set this only when you set :update option in country select,
30:                                               # and this should keep save with the :only options in country select.
31:                 :update => 'city_select_id'
32:               }, html_options)
33: 
34:  %>
35:  <%=

    app/views/users/new.html.erb:32
    app/views/users/new.html.erb:5

Rendered rescues/_trace (203.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:19:14) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined local variable or method `html_options' for #<ActionView::Base:0x4810ad4>) on line #39 of app/views/users/new.html.erb:
36: city_select(:user, :city, {
37:                 :country => :china,           # This is used to set the default city options.
38:                 :state   => :beijing,         # This is used to set the default city options.
39:               }, html_options)
40:   %>
41: 
42: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:39
    app/views/users/new.html.erb:5

Rendered rescues/_trace (187.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:19:20) [GET]
  [4;35;1mUser Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x4745c58>) on line #36 of app/views/users/new.html.erb:
33: 
34:  %>
35:  <%=
36: city_select(:user, :city, {
37:                 :country => :china,           # This is used to set the default city options.
38:                 :state   => :beijing,         # This is used to set the default city options.
39:               })

    app/views/users/new.html.erb:36
    app/views/users/new.html.erb:5

Rendered rescues/_trace (219.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to AddCityToUserDetail (20100720151050)
  [4;36;1mSQL (16.0ms)[0m   [0;1mALTER TABLE `user_details` DROP `city`[0m
  [4;35;1mSQL (15.0ms)[0m   [0mDELETE FROM schema_migrations WHERE version = '20100720151050'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `user_contacts`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mdescribe `user_contacts`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `user_contacts`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW FIELDS FROM `user_details`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mdescribe `user_details`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `user_details`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mdescribe `users`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:20:35) [GET]
  [4;36;1mUser Columns (16.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x46dfbd8>) on line #36 of app/views/users/new.html.erb:
33: 
34:  %>
35:  <%=
36: city_select(:user, :city, {
37:                 :country => :china,           # This is used to set the default city options.
38:                 :state   => :beijing,         # This is used to set the default city options.
39:               })

    app/views/users/new.html.erb:36
    app/views/users/new.html.erb:5

Rendered rescues/_trace (219.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:22:39) [GET]
  [4;35;1mUser Columns (15.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x46e950c>) on line #36 of app/views/users/new.html.erb:
33: 
34:  %>
35:  <%=
36: city_select :user, :city
37:   %>
38: 
39: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:36
    app/views/users/new.html.erb:5

Rendered rescues/_trace (109.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:23:02) [GET]
  [4;36;1mUser Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x45f4e30>) on line #36 of app/views/users/new.html.erb:
33: 
34:  %>
35:  <%=
36: city_select :user, :city
37:   %>
38: 
39: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:36
    app/views/users/new.html.erb:5

Rendered rescues/_trace (94.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` LIMIT 1[0m
  [4;35;1mUser Columns (16.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (`users`.`login` IS NULL) LIMIT 1[0m
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`email` IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mROLLBACK[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20100720125948)
Migrating to CreateUserDetails (20100720132213)
Migrating to CreateUserContacts (20100720133010)
Migrating to AddCityToUserDetail (20100720151050)
  [4;36;1mSQL (16.0ms)[0m   [0;1mALTER TABLE `user_details` ADD `city` varchar(255)[0m
  [4;35;1mSQL (0.0ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100720151050')[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `user_contacts`[0m
  [4;36;1mSQL (16.0ms)[0m   [0;1mdescribe `user_contacts`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW KEYS FROM `user_contacts`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW FIELDS FROM `user_details`[0m
  [4;35;1mSQL (15.0ms)[0m   [0mdescribe `user_details`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSHOW KEYS FROM `user_details`[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mdescribe `users`[0m
  [4;35;1mSQL (16.0ms)[0m   [0mSHOW KEYS FROM `users`[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2010-07-20 23:29:09) [GET]
  [4;36;1mUser Columns (15.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
Rendering users/new

ActionView::TemplateError (undefined method `city' for #<User:0x3a87318>) on line #36 of app/views/users/new.html.erb:
33: 
34:  %>
35:  <%=
36: city_select :user, :city
37:   %>
38: 
39: <p><%= submit_tag 'Sign up' %></p>

    app/views/users/new.html.erb:36
    app/views/users/new.html.erb:5

Rendered rescues/_trace (218.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UserDetailsController#new (for 127.0.0.1 at 2010-07-20 23:29:55) [GET]
  [4;35;1mUserDetail Columns (15.0ms)[0m   [0mSHOW FIELDS FROM `user_details`[0m
Rendering template within layouts/user_details
Rendering user_details/new
ERROR: compiling _run_erb_app47views47user_details47new46html46erb RAISED compile error
D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:3: syntax error, unexpected tSYMBEG, expecting kDO or '{' or '('
...il,:url => user_details_path :html => { :multipart => true }...
                              ^
D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:3: syntax error, unexpected kDO_BLOCK, expecting kEND
... => { :multipart => true }  do |f| ; @output_buffer.concat "...
                              ^
D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:77: syntax error, unexpected kENSURE, expecting $end
Function body:           def _run_erb_app47views47user_details47new46html46erb(local_assigns)
            old_output_buffer = output_buffer;;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<h1>New user_detail</h1>\n\n"

;  form_for :user_detail,:url => user_details_path :html => { :multipart => true }  do |f| ; @output_buffer.concat "\n  "
; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n\n  <p>\n    "


; @output_buffer.concat(( f.label :nickname ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :nickname ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :sex ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :sex ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :height ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :height ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :birthday ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.datetime_select :birthday ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :married ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.check_box :married ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :education ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :education ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :monthly ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :monthly ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :job ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :job ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :notes ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_area :notes ).to_s); @output_buffer.concat "\n  </p>\n  <p>\n    "


; @output_buffer.concat(( f.label :user_id ).to_s); @output_buffer.concat "<br />\n    "
; @output_buffer.concat(( f.text_field :user_id ).to_s); @output_buffer.concat "\n  </p>  \n"

; @output_buffer.concat "<br />\n  #or URL: "
; @output_buffer.concat(( f.text_field :image_file_url ).to_s); @output_buffer.concat "\n  #</p>\n%>\n\n"



; @output_buffer.concat((
country_select(:user, :country, {
                :only => [:china],            # Specify the countries you like to displayed in select.
                :update => 'state_select_id'
              })


).to_s); @output_buffer.concat "\n"
; @output_buffer.concat(( 
state_select(:user, :state, {
                :country => :china,           # Specify the default states options.
                :countries => [:china],       # set this only when you set :update option in country select,
                                              # and this should keep save with the :only options in country select.
                :update => 'city_select_id'
              })

 ).to_s); @output_buffer.concat "\n "
; @output_buffer.concat((
city_select :user, :city
  ).to_s); @output_buffer.concat "\n  <p>\n    "

; @output_buffer.concat(( f.submit 'Create' ).to_s); @output_buffer.concat "\n  </p>\n"

;  end ; @output_buffer.concat "\n\n"

; @output_buffer.concat(( link_to 'Back', user_details_path ).to_s); @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:77:in `compile!'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:61:in `compile'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/renderable.rb:28:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/template.rb:205:in `render_template'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/base.rb:265:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/base.rb:348:in `_render_with_layout'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_view/base.rb:262:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1250:in `render_for_file'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:942:in `render_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:51:in `render'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:135:in `send'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:135:in `custom'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:175:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:175:in `respond'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:173:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:173:in `respond'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/mime_responds.rb:107:in `respond_to'
D:/ror2010/jiaoyou/app/controllers/user_details_controller.rb:29:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1331:in `send'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:1331:in `perform_action_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:617:in `call_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/1.8/benchmark.rb:308:in `realtime'
D:/rubys/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/core_ext/benchmark.rb:17:in `ms'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/flash.rb:151:in `perform_action'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `send'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:532:in `process_without_filters'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/filters.rb:606:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:391:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/base.rb:386:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/routing/route_set.rb:438:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:87:in `dispatch'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:121:in `_call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:29:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:9:in `cache'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/query_cache.rb:28:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/activerecord-2.3.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/string_coercion.rb:25:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/head.rb:9:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/methodoverride.rb:24:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/params_parser.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/session/cookie_store.rb:99:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/failsafe.rb:26:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `synchronize'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:114:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/reloader.rb:34:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/actionpack-2.3.8/lib/action_controller/dispatcher.rb:108:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/static.rb:31:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:47:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/rack/log_tailer.rb:17:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/chunked.rb:15:in `call'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:67:in `process'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:159:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `each'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:158:in `process_client'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:285:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `initialize'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `new'
D:/rubys/lib/ruby/gems/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel.rb:268:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rack-1.1.0/lib/rack/handler/mongrel.rb:38:in `run'
D:/rubys/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:111
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
D:/rubys/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:3: syntax error, unexpected tSYMBEG, expecting kDO or '{' or '('
...il,:url => user_details_path :html => { :multipart => true }...
                              ^
D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:3: syntax error, unexpected kDO_BLOCK, expecting kEND
... => { :multipart => true }  do |f| ; @output_buffer.concat "...
                              ^
D:/ror2010/jiaoyou/app/views/user_details/new.html.erb:77: syntax error, unexpected kENSURE, expecting $end) on line #3 of app/views/user_details/new.html.erb:
1: <h1>New user_detail</h1>
2: 
3: <% form_for :user_detail,:url => user_details_path :html => { :multipart => true }  do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    app/views/user_details/new.html.erb:77:in `compile!'
    app/controllers/user_details_controller.rb:29:in `new'

Rendered rescues/_trace (110.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UserDetailsController#new (for 127.0.0.1 at 2010-07-20 23:30:24) [GET]
  [4;36;1mUserDetail Columns (0.0ms)[0m   [0;1mSHOW FIELDS FROM `user_details`[0m
Rendering template within layouts/user_details
Rendering user_details/new

ActionView::TemplateError (undefined method `image_file_url' for #<UserDetail:0x4a198bc>) on line #47 of app/views/user_details/new.html.erb:
44:     <%= f.text_field :user_id %>
45:   </p>  
46: <%#  <p>
47:   #<b>Upload Image</b><br />
48:   #<%= f.file_field :image_file %><br />
49:   #or URL: <%= f.text_field :image_file_url %>
50:   #</p>

    app/views/user_details/new.html.erb:47
    app/views/user_details/new.html.erb:3
    app/controllers/user_details_controller.rb:29:in `new'

Rendered rescues/_trace (234.0ms)
Rendered rescues/_request_and_response (0.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UserDetailsController#new (for 127.0.0.1 at 2010-07-20 23:31:01) [GET]
  [4;35;1mUserDetail Columns (0.0ms)[0m   [0mSHOW FIELDS FROM `user_details`[0m
Rendering template within layouts/user_details
Rendering user_details/new
Completed in 235ms (View: 219, DB: 0) | 200 OK [http://127.0.0.1/user_details/new]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UserDetailsController#new (for 127.0.0.1 at 2010-07-20 23:33:45) [GET]
  [4;36;1mUserDetail Columns (16.0ms)[0m   [0;1mSHOW FIELDS FROM `user_details`[0m
Rendering template within layouts/user_details
Rendering user_details/new
Completed in 391ms (View: 375, DB: 16) | 200 OK [http://127.0.0.1/user_details/new]
